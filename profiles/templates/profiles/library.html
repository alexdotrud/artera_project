{% for it in order_items %}
<div class="card mb-4 border-0 shadow-sm">
    <div class="row g-0 align-items-stretch">
        <!-- Image -->
        <div class="col-12 col-md-4">
            <a href="{% url 'detail' it.artwork.id %}" class="d-block h-100">
                {% if it.artwork.image %}
                <img src="{{ it.artwork.image.url }}" alt="{{ it.artwork.name }}" class="img-fluid w-100 h-100"
                    style="object-fit: cover;">
                {% elif it.artwork.image_url %}
                <img src="{{ it.artwork.image_url }}" alt="{{ it.artwork.name }}" class="img-fluid w-100 h-100"
                    style="object-fit: cover;">
                {% else %}
                <div class="d-flex align-items-center justify-content-center bg-light w-100 h-100"
                    style="min-height:240px;">
                    <span class="text-muted">No Image</span>
                </div>
                {% endif %}
            </a>
        </div>

        <!-- Info -->
        <div class="col-12 col-md-8">
            <div class="p-3 p-md-4 h-100 d-flex flex-column">
                <div class="mb-2">
                    <span class="text-muted">Name:</span>
                    <strong>{{ it.artwork.name }}</strong>
                </div>

                <div class="mb-2">
                    <span class="text-muted">Description:</span>
                    {{ it.artwork.description|default:"—"|truncatewords:30 }}
                </div>

                <div class="mb-2">
                    <span class="text-muted">Size:</span>
                    {{ it.size|default:"—" }}
                </div>

                {% with ordered_at=it.order.date|default:it.order.created_at|default:it.order.id %}
                <div class="mb-2">
                    <span class="text-muted">Ordered At:</span>
                    {% if it.order.date or it.order.created_at %}
                    {{ ordered_at|date:"Y-m-d H:i" }}
                    {% else %}
                    Order #{{ ordered_at }}
                    {% endif %}
                </div>
                {% endwith %}

                <div class="mt-auto pt-2">
                    {% if it.artwork.file %}
                    <a href="{{ it.artwork.file.url }}" class="btn btn-dark">Download</a>
                    {% else %}
                    <button class="btn btn-outline-secondary" disabled>No file available</button>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %}